(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1659],{71659:function(e,t,i){Promise.resolve().then(i.bind(i,38643))},38643:function(e,t,i){"use strict";i.r(t),i.d(t,{HomeScreen:function(){return $}});var s=i(57437),l=i(22674),r=i(6521),n=i(88356),a=i(44994),o=i(81704),d=i(58732),c=i(2265),u=i(25137),m=i(57042),h=i(24033),p=i(93565),x=i(5845),g=i(90762);let f=c.createContext(void 0),v=()=>{let e=(0,c.useContext)(f);if(void 0===e)throw Error("useGridImageContext must be used within GridImageContext.Provider");return e};var b=i(64852),j=i(44348),y=i(36518),w=i(19702),N=i(95884),k=i(55764),C=i(54829),S=i(61396),z=i.n(S),F=i(28925),M=i(24670),D=i(19095),P=i(82749);let E=c.memo(function(e){var t,i;let{index:l,width:r,data:a}=e,o=(0,h.useRouter)(),d=(0,c.useRef)(null),u=(0,c.useRef)(null),p=(0,M.useApertureState)(),x=(0,F.t)(),{setPromptModal:g}=(0,M.usePromptModal)(),{data:f}=(0,P.useSession)(),S=null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.id,E=r>130,{numColumns:Z}=(0,M.useNumColumns)(),{onImageSearch:R,eventSource:L}=v(),W=x.enabled&&x.isSelected(a.id),A=a.promptObj,I=null!==(i=a.userid!==S&&(null==A?void 0:A.cleanedPrompt)?null==A?void 0:A.cleanedPrompt:null==A?void 0:A.prompt)&&void 0!==i?i:"",O=!(r>190)||(null==A?void 0:A.grid)?"sm":"md",{mutate:T}=(0,k.D)({mutationFn:async e=>C.Z.post("/api/event-load-prompt",e)}),{mutate:B}=(0,k.D)({mutationFn:async e=>C.Z.post("/api/event-explore-similar",e)}),U=(0,w.Jn)({id:a.id,size:O,model:null==A?void 0:A.model}),q=(0,c.useMemo)(()=>{if(!I)return"";if(!(I.length>100))return I.charAt(0).toUpperCase()+I.slice(1);{let e=I.slice(0,100)+"...";return e.charAt(0).toUpperCase()+e.slice(1)}},[I]),G=(0,c.useMemo)(()=>{if(!I)return"";let e=I.split(",");if(!(e.length>1))return"";{let t=e[0].charAt(0).toUpperCase()+e[0].slice(1);return t.length>100&&(t=t.slice(0,100)+"..."),t}},[I]),_=(0,c.useMemo)(()=>{if(!I)return"";let e=I.split(",");if(!(e.length>1))return"";{let t=e.slice(1).join(",").trim();return(t=t.charAt(0).toUpperCase()+t.slice(1)).length>64&&(t=t.slice(0,64)+"..."),t}},[I]),V=a.width>a.height,[H,J]=c.useState(!1);(0,c.useEffect)(()=>{d.current&&(d.current.onload=()=>{var e;null===(e=u.current)||void 0===e||e.classList.remove("opacity-0"),J(!0)},d.current.src=U,J(!1))},[U]);let{mutate:K}=(0,k.D)({mutationFn:async e=>C.Z.post("/api/expand-image",e)}),Y=(0,c.useCallback)((e,t)=>{let i=I;i=(i=I.replace(/\s{2,}/g," ")).trim(),p.setState("prompt",i),p.setState("guidanceScale",6);let s=(0,D.j)(e,[t]);p.setState("imageRows",[{images:s.images,prompt:s.prompt},...p.imageRows]),o.push("/aperture")},[p,I,o]),$=(0,c.useCallback)(e=>{if(x.enabled){e.preventDefault(),e.stopPropagation(),W?x.onDeselect(a.id):x.onSelect(a.id,e.shiftKey);return}(0,N.gs)(e)||(K({promptId:a.promptid,imageId:a.id,eventSource:L}),g({prompt:A,initialImageId:a.id,placeholderSize:O,eventSource:L}),e.preventDefault(),o.push("/prompt",{scroll:!1}))},[a,A,o,O,L,g,W,x,K]);return(0,s.jsxs)("div",{ref:u,style:{WebkitTransition:"opacity ".concat(250,"ms ease"),MozTransition:"opacity ".concat(250,"ms ease"),msTransition:"opacity ".concat(250,"ms ease"),OTransition:"opacity ".concat(250,"ms ease")},className:(0,m.Z)("block relative group select-none overflow-hidden m-0.5 border-indigo-600 cursor-pointer",{"rounded-tl-2xl":0===l,"rounded-tr-2xl":l===Z-1,"opacity-0":!H}),children:[(0,s.jsxs)("a",{href:"/prompt/".concat(null==A?void 0:A.id),onClick:$,className:"absolute inset-0",children:[x.enabled&&(0,s.jsx)("div",{className:(0,m.Z)("absolute top-0 left-0 bottom-0 right-0",{"bg-indigo-600 bg-opacity-50":W}),children:(0,s.jsx)("div",{className:(0,m.Z)("rounded-full text-indigo-700 shadow  w-7 h-7 absolute top-3 left-3",{"border border-white":!W}),children:W&&(0,s.jsx)(j.m,{className:"w-full h-full rounded-full bg-white"})})}),(0,s.jsxs)("div",{className:(0,m.Z)("absolute inset-0 z-10 block text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity duration-100 pointer-events-none line-clamp px-2 pb-2",{"text-sm px-4":r>180,"text-xs px-1.5":r<=180}),style:{background:"linear-gradient(to top,rgba(0,0,0,0.8) 0% , rgba(0,0,0,0) 60%, rgba(0,0,0,0) 100%)"},children:[!x.enabled&&G&&E&&(0,s.jsx)("div",{className:"flex-shrink h-full flex items-end",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:(0,m.Z)("",{"text-xs font-medium leading-snug mb-0.5":r<=180||V,"text-sm mb-1.5 font-medium leading-snug":r>180}),style:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:r>=220?3:r>=190?2:1,WebkitBoxOrient:"vertical"},children:G}),(0,s.jsx)("p",{style:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:V?1:r>=200?3:2,WebkitBoxOrient:"vertical"},className:"opacity-70 leading-snug text-xs mb-1",children:_})]})}),!x.enabled&&!G&&q&&E&&(0,s.jsx)("div",{className:"flex-shrink h-full flex items-end shadow-md",children:(0,s.jsx)("div",{className:(0,m.Z)("flex flex-col",{}),children:(0,s.jsx)("p",{className:(0,m.Z)("font-medium mb-1",{"text-xs leading-snug ":r<=180||V,"text-sm leading-snug":r>180&&!V,"text-white leading-snug opacity-100":!G,"opacity-80":G}),style:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:r>=200?3:V?1:2,WebkitBoxOrient:"vertical"},children:q})})})]})]}),!x.enabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(0,m.Z)("absolute top-0 left-0 right-0 p-2 flex z-10 text-zinc-100 justify-between pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity ",{"text-sm":r>180,"text-xs":r<=180,invisible:x.enabled}),children:[(0,s.jsx)(z(),{href:"/?q=".concat(a.id),prefetch:!1,onClick:e=>{B({imageId:a.id,promptId:A.id,eventSource:L,eventVariant:"card"}),(0,N.gs)(e)||(e.preventDefault(),e.stopPropagation(),R(a))},className:(0,m.Z)("bg-zinc-900 bg-opacity-50 hover:bg-opacity-100 transition-opacity flex items-center justify-center pointer-events-auto cursor-pointer",{"rounded text-lg h-8 w-8":r<=180,"text-lg h-10 w-10 rounded-lg":r>180}),children:(0,s.jsx)(n.j,{})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(y._,{imageId:a.id,imageWidth:r,eventSource:L},a.id),(0,s.jsx)("button",{onClick:e=>{Y(A,a),T({imageId:a.id,promptId:A.id,eventSource:L,eventVariant:"card"})},className:(0,m.Z)("bg-zinc-900 bg-opacity-50 hover:bg-opacity-100 transition-opacity flex items-center justify-center pointer-events-auto cursor-pointer",{"rounded text-lg h-8 w-8":r<=180,"text-lg h-10 w-10 rounded-lg":r>180}),children:(0,s.jsx)(b.h,{})})]})]}),a.rank&&(0,s.jsx)("div",{className:(0,m.Z)("absolute bottom-3 right-3 px-1 rounded bg-black text-white shadow-md text-sm",{"bg-yellow-800":"popular"===a.rank,"bg-red-700":"rising"===a.rank,"bg-zinc-900":"new"===a.rank}),children:a.points})]}),(0,s.jsx)("img",{ref:d,width:a.width/1.6,height:a.height/1.6,className:"pointer-events-none"})]})});var Z=i(17647),R=i(51872),L=i(94176),W=i(99505),A=i(79179),I=i(65013),O=i(16345),T=i(69123);let B=e=>{let{source:t,onClick:i,onDelete:l}=e,r=(0,T.BR)(t,"sm"),{width:n,height:a}=function(e){let t,i;if(e.isUpload?{width:t,height:i}=e:{width:t,height:i}=e.image,!t||!i)return{width:void 0,height:void 0};let s=t/i;if(s>1){let e=Math.min(t,160);return{width:e,height:e/s}}{let e=Math.min(i,120);return{width:e*s,height:e}}}(t);return(0,s.jsxs)("div",{className:"bg-zinc-700 overflow-hidden relative flex group rounded-lg drop-shadow border border-zinc-800 items-center justify-center w-auto",children:[(0,s.jsx)("div",{id:"image-preview",onClick:i,className:"z-50 absolute flex items-start justify-end w-full h-full  cursor-pointer text-xl hover:bg-opacity-50 bg-opacity-0 bg-black transition-all group",children:(0,s.jsx)("div",{className:"group-hover:opacity-100 opacity-0 mr-1 mt-1 hover:bg-black p-1 rounded",onClick:l,children:(0,s.jsx)(O.W,{})})}),n&&a?(0,s.jsx)("div",{style:{paddingBottom:"".concat(1/(n/a)*100,"%")},className:"relative w-full h-0 overflow-hidden",children:(0,s.jsx)("img",{style:{width:"".concat(n,"px"),height:"".concat(a,"px")},src:r,alt:""})}):(0,s.jsx)("img",{style:{maxHeight:120,maxWidth:160},className:"h-full w-full object-contain",src:r,alt:""})]})};var U=i(57950),q=i(7184),G=i(90936),_=i(24930),V=i.n(_),H=i(40263).Buffer;let J=V()(()=>i.e(9883).then(i.bind(i,99883)).then(e=>e.AdminActions),{loadableGenerated:{webpack:()=>[99883]}}),K={model:["lexica-aperture-v4","lexica-aperture-v3.5","lexica-aperture-v2","sd-1.5"],mode:["images","prompts"]},Y={model:"lexica-aperture-v3.5",mode:"images"},$=e=>{var t,v,b,j,y,k,S,O,_,V,$,ee;let{initialSource:et="search",initialSearchTerm:ei="",initialSearchText:es="",initialPrompts:el,showDiscord:er=!1,serverQueryId:en}=e,{data:ea}=(0,P.useSession)(),eo=(0,h.useSearchParams)(),ed=(0,h.useRouter)(),ec=(0,d.iP)(),eu=ec.width&&ec.width<768,em=eo.get("model");K.model.includes(em)||(em=Y.model);let eh=eo.get("mode");K.mode.includes(eh)||(eh=Y.mode);let ep=eh!==Y.mode||em!==Y.model,[ex,eg]=(0,c.useState)(!1);(0,c.useEffect)(()=>{ep&&eg(!0)},[ep]);let[ef,ev]=(0,c.useState)(!1),eb="search"!==et||ei?et:"home",[ej,ey]=(0,c.useState)(()=>"string"==typeof ei?ei:"");(0,c.useEffect)(()=>{ey("string"==typeof ei?ei:"")},[ei]);let[ew,eN]=(0,c.useState)(()=>"string"==typeof ei?null:ei);(0,c.useEffect)(()=>{eN("string"==typeof ei?null:ei)},[ei]);let[ek,{errors:eC,clear:eS}]=(0,A.s)({readAs:"DataURL",accept:"image/*",multiple:!1,limitFilesConfig:{max:1},maxFileSize:100,onFilesSuccessfulySelected:async e=>{let{plainFiles:t,filesContent:s}=e;if(0===t.length||0===s.length)throw Error("Files are empty");let l=t[0],r=s[0],n=await (0,T.t_)(r.content),a=async e=>{try{return(0,(await i.e(2536).then(i.bind(i,42536))).default)(e,{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0})}catch(t){return console.log("Could not compress"),e}},o={id:(0,R.Z)(),isUpload:!0,upload:a(l).then(e=>(0,w.Ix)(e,"tiny")),data:r.content,url:void 0,width:n.width,height:n.height,status:"pending"};ey(""),eN(o);let d=e=>{eN(t=>t?{...t,status:e}:null)};o.upload.then(e=>{d("success"),eO({term:H.from(JSON.stringify({id:o.id,url:e,width:o.width,height:o.height,timestamp:Date.now()})).toString("base64")})}).catch(()=>d("error"))}});(0,c.useEffect)(()=>{ew||eS()},[ew,eS]);let[ez,eF]=(0,c.useTransition)(),[eM,eD]=(0,c.useTransition)(),eP=ez&&"search"===et||eM&&"history"===et,eE=async e=>{let{pageParam:t=0}=e,i={text:es,model:em,searchMode:eh,source:et,cursor:t,firstRequestDate:t>0?eI:void 0};return(await C.Z.post("/api/infinite-prompts",i)).data},eZ=(0,c.useMemo)(()=>["prompts.infinitePrompts","search"===et?{source:"search",text:es,model:em,searchMode:eh,serverQueryId:en}:"history"===et?{source:"history",text:es}:{source:et}],[et,es,em,eh,en]),eR=(0,U.N)({queryKey:eZ,initialData:el&&{pages:[el],pageParams:[null]},queryFn:eE,getNextPageParam:e=>e.nextCursor,retryDelay:0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,...("search"===et||"aperture-feed"===et)&&{refetchOnMount:!1,staleTime:1/0},select:e=>({...e,pages:e.pages.map(e=>{let t=new Map(e.prompts.map(e=>[e.id,e]));return{...e,images:e.images.map(e=>{var i;let s=t.get(e.promptid);return{...e,prompt:null!==(i=null==s?void 0:s.prompt)&&void 0!==i?i:"",promptObj:s}})}})})}),eL=(0,c.useMemo)(()=>{var e;return(null===(e=eR.data)||void 0===e?void 0:e.pages.flatMap(e=>e.images))||[]},[eR.data]),eW=null===(b=eR.data)||void 0===b?void 0:null===(v=b.pages)||void 0===v?void 0:null===(t=v[0])||void 0===t?void 0:t.count,eA="number"==typeof eW&&eW>=0?eW:eL.length?null:0,eI=null===(y=eR.data)||void 0===y?void 0:null===(j=y.pages[0])||void 0===j?void 0:j.firstRequestDate,eO=(0,c.useCallback)(e=>{let{term:t,model:i,mode:s}=e;t=null==t?void 0:t.trim();let l=new URLSearchParams(eo.toString());void 0!==t&&(""===t?l.delete("q"):l.set("q",t)),void 0!==i&&(i===Y.model?l.delete("model"):l.set("model",i),"sd-1.5"!==i&&l.delete("mode")),void 0!==s&&(s===Y.mode?l.delete("mode"):l.set("mode",s)),eF(()=>{if(eo.toString()===l.toString())ed.refresh();else{let e=l.size>0?"/?".concat(l.toString()):"/";ed.push(e)}})},[ed,eo]),eT=(0,c.useCallback)(e=>{let t=e.trim();t!==ei&&eD(()=>{let e=new URLSearchParams({q:t}),i=t?"/history?".concat(e.toString()):"/history";ed.push(i)})},[ed,ei]),{numColumns:eB,setNumColumns:eU}=(0,M.useNumColumns)();(0,c.useEffect)(()=>{if(!ef){ev(!0);let e=document.getElementById("main-search"),t=document.documentElement.clientWidth;e&&t>768&&e.focus()}if(!eB){let e=window.innerWidth,t=Math.floor(e/270);e%270/270>.5?eU(Math.max(2,t+1)):eU(Math.max(2,t))}},[ef,eB,eU]),(0,c.useEffect)(()=>{ed.prefetch("/prompt")},[ed]);let eq=(0,c.useCallback)(e=>{if("search"===et){ey("");let t=(0,D.j)(e.promptObj,[e]);eN({id:e.id,image:t.images[0],prompt:t.prompt})}eO({term:e.id,mode:"images"})},[eO,et]),eG=(0,c.useRef)(!1),e_=(0,c.useCallback)(async(e,t,i)=>{eR.isFetchingNextPage||!eR.hasNextPage||eG.current||(eG.current=!0,await eR.fetchNextPage().finally(()=>{eG.current=!1}))},[eR]),eV=(0,p.z)(e_,{isItemLoaded:(e,t)=>!!t[e]}),[eH]=(0,L.u)(),[eJ]=(0,L.u)(),eK=(0,I.Z)(eL),eY=(0,c.useRef)(0),e$=(0,c.useMemo)(()=>{if(eK)for(let t=0;t<eK.length;t++){var e;if(eK[t].id!==(null===(e=eL[t])||void 0===e?void 0:e.id))return eY.current+1}return eY.current},[eL,eK]);(0,c.useEffect)(()=>{eY.current=e$},[e$]);let eQ=(0,c.useMemo)(()=>({onImageSearch:eq,eventSource:eb}),[eq,eb]);return(0,s.jsx)(F.b,{images:eL,showDelete:"history"===et,children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"sm:hidden absolute w-full flex items-center justify-end top-2 right-2",children:(0,s.jsx)(q.LoginOrAccountButton,{})}),(0,s.jsxs)("div",{className:"w-screen overflow-x-hidden flex flex-col items-center py-4 mt-16",children:["likes"===et&&(0,s.jsx)("div",{className:"text-7xl mb-12 font-logo font-bold mt-0",children:"Likes"}),"aperture-feed"===et&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-7xl mb-12 font-logo font-bold mt-0 ",children:"Aperture"}),(0,s.jsx)("div",{className:"text-sm -mt-3 max-w-sm text-center text-zinc-300 mb-6",children:"Aperture is a new model from Lexica that can generate photorealistic images."}),(0,s.jsx)(z(),{href:"/aperture",children:(0,s.jsx)("button",{className:"mb-4 px-8 py-2 text-md rounded-lg bg-zinc-700 border border-zinc-600 transition-all active:scale-95 hover:brightness-105",children:"Try Aperture now"})})]}),"history"===et&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z(),{onClick:e=>{(0,N.gs)(e)||(e.preventDefault(),eT(""))},className:"text-5xl sm:text-6xl md:text-7xl mb-8 font-logo font-bold mt-0 text-center",href:"/history",children:"Camera Roll"}),(0,s.jsx)("div",{className:"flex items-center w-full max-w-[500px] px-4 pl-5 md:px-5",children:(0,s.jsxs)("div",{className:"w-full flex items-center relative",ref:eJ,children:[(0,s.jsx)(n.j,{className:"absolute left-4 pointer-events-none text-sm"}),(0,s.jsx)("input",{id:"main-search",autoComplete:"off",value:ej,onChange:e=>ey(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.currentTarget.blur(),eT(ej))},className:"bg-zinc-700 flex-1 pl-12 pr-12 rounded-full text-sm px-4 py-2.5 focus:outline-none focus:ring-1 focus:ring-indigo-700",placeholder:"Search your images"})]})}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("button",{onClick:()=>{eT(ej)},className:(0,m.Z)("w-32 sm:w-36 flex items-center text-xs justify-center text-center  h-9 rounded-full  hover:brightness-110 bg-opacity-0 shadow-sm  mt-4 bg-gradient-to-t from-indigo-900 via-indigo-900 to-indigo-800"),children:eR.isFetching&&!eR.isFetchingNextPage||eP?(0,s.jsx)(u.$,{size:"md"}):"Search"})})]}),"search"===et&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z(),{onClick:e=>{(0,N.gs)(e)||(e.preventDefault(),ey(""),eN(null),eO({term:"",model:Y.model,mode:Y.mode}))},href:"/",children:(0,s.jsx)(l.h,{className:"h-16 m-4"})}),(0,s.jsx)(z(),{className:"cursor-pointer ",href:"/aperture",children:(0,s.jsx)("p",{className:"mt-2 text-xs text-indigo-400 active:scale-95 text-center font-medium shadow-sm hover:shadow-md bg-indigo-400 bg-opacity-5 hover:bg-opacity-10 border border-indigo-300 border-opacity-10 hover:border-opacity-20 transition-all rounded-md px-10 py-4",children:"Try Aperture v5!"})}),er&&(0,s.jsx)("a",{href:"https://discord.gg/bMHBjJ9wRh",rel:"noopener noreferrer",target:"_blank",className:"p-0 mt-3",children:(0,s.jsxs)("button",{className:"h-8 px-3 flex text-xs rounded-lg select-none  items-center justify-center opacity-50 hover:opacity-90 hover:bg-zinc-600 border border-zinc-700",children:[(0,s.jsx)(o.M,{className:"text-base mr-2"})," Join the Discord"]})}),(0,s.jsxs)("div",{className:"flex items-center w-full max-w-[600px] md:ml-[48px] mt-8 px-4 pl-5 md:px-5",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"w-full flex items-center relative",ref:eJ,children:[(0,s.jsx)(n.j,{className:"absolute left-4 pointer-events-none text-sm"}),(0,s.jsx)("input",{id:"main-search",autoComplete:"off",value:ej,onChange:e=>ey(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.currentTarget.blur(),eN(null),eO({term:ej}))},className:"bg-zinc-700 flex-1 pl-12 pr-12 rounded-full text-sm px-4 py-2.5 focus:outline-none focus:ring-1 focus:ring-indigo-700",placeholder:"Search for an image"}),(0,s.jsx)(W.u,{label:"Upload an image for reverse image search.",children:(0,s.jsx)("button",{onClick:()=>{ek()},className:"text-base absolute right-2 hover:bg-zinc-800 h-8 w-8 flex items-center justify-center rounded-full",children:(0,s.jsx)(r.L,{})})})]})}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{onClick:()=>eg(!ex),className:(0,m.Z)("ml-2 h-10 w-10 rounded-full cursor-pointer flex items-center justify-center ",{"bg-transparent hover:bg-zinc-900":!ex,"bg-zinc-900":ex}),children:(0,s.jsx)(a.N,{})})})]}),(0,s.jsx)("div",{className:"flex w-full max-w-[600px] md:ml-[48px] px-4 pl-5 md:px-5",ref:eH,children:ex&&(0,s.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,s.jsxs)("div",{className:"w-full px-3 pt-3 flex space-x-1 items-center justify-center pr-12",children:["sd-1.5"===em&&(0,s.jsx)(Z.L,{placeholder:"Select search mode...",values:[{label:"Search by image relevancy",value:"images"},{label:"Search by prompt text",value:"prompts"}],onChange:e=>{eO({mode:e})},selectedValue:eh}),(0,s.jsx)(Z.L,{placeholder:"Select model...",values:[{label:"Lexica Aperture v4",value:"lexica-aperture-v4"},{label:"Lexica Aperture v3.5 and v4",value:"lexica-aperture-v3.5"}],onChange:e=>{eO({model:e})},selectedValue:em})]})})}),eC.length>0&&(0,s.jsxs)("div",{className:" font-medium my-4 ",children:[(0,s.jsx)("div",{children:eC[0].fileSizeToolarge&&"Maximum file size is 100 MB."}),(0,s.jsx)("div",{children:eC[0].readerError&&"Problem occured while reading file."})]}),ew&&(0,s.jsx)("div",{className:"mt-4 mb-2",children:(0,s.jsx)(B,{source:ew,onDelete:()=>{ey(""),eN(null),eO({term:""})}},ew.id)}),(0,s.jsx)("div",{className:" mb-8 flex flex-col items-center",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{eN(null),eO({term:ej})},className:(0,m.Z)("w-32 sm:w-36 flex items-center text-xs justify-center text-center  h-9 rounded-full  hover:brightness-110 bg-opacity-0 shadow-sm  mt-4 bg-gradient-to-t from-indigo-900 via-indigo-900 to-indigo-800"),children:eR.isFetching&&!eR.isFetchingNextPage||eP||(null==ew?void 0:ew.status)==="pending"?(0,s.jsx)(u.$,{size:"md"}):"Search"}),(0,s.jsx)(z(),{href:"/aperture",children:(0,s.jsx)("button",{className:(0,m.Z)("w-32 sm:w-36 flex items-center text-xs justify-center text-center  h-9 rounded-full  hover:brightness-110 bg-opacity-0 shadow-sm  mt-4 border border-gray-700 hover:bg-zinc-700"),children:"Generate"})})]})})]}),ef&&(0,s.jsx)("div",{className:"mt-2 hover:opacity-100 opacity-50 transition-all",children:(0,s.jsx)(g.ZP,{sx:{color:"white",opacity:.8},style:{width:200},"aria-label":"Columns",defaultValue:null!=eB?eB:4,getAriaValueText:()=>"Columns",valueLabelDisplay:"auto",step:1,value:null!=eB?eB:4,onChange:(e,t)=>{eU(t)},min:1,max:eu?4:12})}),!eP&&(null==ew?void 0:ew.status)!=="pending"&&eR.isSuccess&&null!==eA&&eA>0&&(0,s.jsxs)("div",{className:"text-center text-sm mt-4 opacity-80 space-y-1.5 sm:flex sm:space-y-0 sm:space-x-5",children:[(0,s.jsxs)("div",{children:["Showing ",eA.toLocaleString()," result",1===eA?"":"s"]}),("history"===et||"likes"===et)&&(0,s.jsx)(Q,{}),(0,G.G)(null==ea?void 0:null===(k=ea.user)||void 0===k?void 0:k.email)&&(null===(_=eR.data)||void 0===_?void 0:null===(O=_.pages[0])||void 0===O?void 0:null===(S=O.images[0])||void 0===S?void 0:S.userid)&&(0,s.jsx)("div",{children:(0,s.jsx)(J,{userId:null===(ee=eR.data)||void 0===ee?void 0:null===($=ee.pages[0])||void 0===$?void 0:null===(V=$.images[0])||void 0===V?void 0:V.userid})})]}),(0,s.jsx)("div",{className:"mt-2",children:"\xa0"}),!eP&&(null==ew?void 0:ew.status)!=="pending"&&eR.isSuccess&&0===eA&&(0,s.jsx)("div",{className:"text-center px-10 text-sm mt-4 text-zinc-400",children:(0,s.jsxs)("p",{children:["search"===et&&(0,s.jsx)(s.Fragment,{children:"No results found."}),"history"===et&&(0,s.jsx)(s.Fragment,{children:ei?(0,s.jsx)(s.Fragment,{children:"No results found."}):(0,s.jsxs)(s.Fragment,{children:["Your camera roll is empty. Go"," ",(0,s.jsx)(z(),{href:"/aperture",className:"underline",children:"generate an image"}),"."]})}),"likes"===et&&(0,s.jsx)(s.Fragment,{children:"You haven't liked any images yet."})]})}),(0,s.jsx)(X,{children:(0,s.jsx)(f.Provider,{value:eQ,children:(0,s.jsx)("div",{className:"mt-3 relative px-2 md:px-7 w-full",children:ef&&!eP&&(null==ew?void 0:ew.status)!=="pending"&&(0,s.jsx)(x.R,{className:"active:outline-none focus:outline-none overflow-hidden",itemHeightEstimate:window.innerWidth/(null!=eB?eB:4),overscanBy:2,onRender:eV,items:eL,render:E,columnCount:null!=eB?eB:4},e$)})})})]})]})})};function Q(){let{enabled:e,setEnabled:t,onClear:i}=(0,F.t)();return(0,s.jsx)("button",{className:"opacity-50 hover:opacity-100",onClick:()=>{e?(i(),t(!1)):t(!0)},children:"Select Multiple"})}class X extends c.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error(e,t),window.location.reload()}render(){return this.state.hasError?null:this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}},90936:function(e,t,i){"use strict";i.d(t,{G:function(){return s}});let s=e=>["samin100@gmail.com","gabe.ragland@gmail.com"].includes(null!=e?e:"")}}]);